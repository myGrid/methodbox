<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<link rel="shortcut icon" href="/favicon.ico" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>
<%= page_title controller.controller_name, controller.action_name %>
</title>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  var surveys_url = "<%= surveys_url -%>";
  var variables_url = "<%= variables_url -%>";
  var by_category_variables_url = "<%= by_category_variables_url -%>";
</script>
<%= javascript_include_tag 'yuiloader-min.js' -%>
<script>
// Instantiate and configure Loader:
var loader = new YAHOO.util.YUILoader({
    base: "yui/build/",
    // Identify the components you want to load.  Loader will automatically identify
    // any additional dependencies required for the specified components.
    require:["yahoo","dom","event","element","button","connection","container","cookie","datasource","paginator","datatable","json","tabview","reset","fonts","grids","base"],

    // Configure loader to pull in optional dependencies.  For example, animation
    // is an optional dependency for slider.
    loadOptional: true,

    // The function to call when all script/css resources have been loaded
    onSuccess: function() {
        //this is your callback function; you can use
        //this space to call all of your instantiation
        //logic for the components you just loaded.
//TODO load the datatable extensions after the yui files are in
    },

    // Configure the Get utility to timeout after 10 seconds for any given node insert
    timeout: 10000,

    // Combine YUI files into a single request (per file type) by using the Yahoo! CDN combo service.
    combine: true
});
loader.insert();
</script>
<!-- Combo-handled YUI CSS files: --> 
<!--<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/reset-fonts-grids/reset-fonts-grids.css&2.9.0/build/base/base-min.css&2.9.0/build/assets/skins/sam/skin.css">-->
<!-- Combo-handled YUI JS files: --> 
<!--<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.9.0/build/yahoo-dom-event/yahoo-dom-event.js&2.9.0/build/element/element-min.js&2.9.0/build/button/button-min.js&2.9.0/build/connection/connection_core-min.js&2.9.0/build/container/container-min.js&2.9.0/build/cookie/cookie-min.js&2.9.0/build/datasource/datasource-min.js&2.9.0/build/paginator/paginator-min.js&2.9.0/build/datatable/datatable-min.js&2.9.0/build/json/json-min.js&2.9.0/build/tabview/tabview-min.js"></script>-->
<%= javascript_include_tag :defaults, 'scriptaculous.js', 'redbox.js', 'autocompleter_advanced.js','tooltips.js', 'savage-beast/application.js','yui/datatable/datatable_expander.js', 'yui/datatable/variable_table_expander.js' -%>
<%= csrf_meta_tag %>
<%= stylesheet_link_tag 'alphabetical_pagination', 'main_layout_extras', 'my_exp', 'gadgets', 'acts_as_taggable_stylesheet', 'styles', 'fast_auto_complete', 'redbox', 'autocompleter_advanced', 'savage_beast/forums', 'spiffy_corners', 'widget_tab_nav', 'main_layout_extras', :cache=>'css_cached' -%>
<!--[if lte IE 6]>
<%= stylesheet_link_tag 'ie6_hacks'-%>
<![endif]-->
<script type="text/javascript">
//<![CDATA[
			function show_ajax_loader(element) {
				$(element).innerHTML=<%= "'"+image_tag("ajax-loader.gif")+"'" -%> ;
			}
		//]]>
</script>
<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23603432-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body style="background-color: white; min-width:1300px;">
<!-- sticky footer based on http://www.cssstickyfooter.com/using-sticky-footer-code.html -->
<div id="wrap">
<div id="main">
      <div id="doc3" class="yui-t2">
        <div>
          <%= render :partial=>"layouts/main_header" %>
        </div>
        <div class="logged-out-main" id="bd">
          <div id="yui-main">
<div id="spinner" style='display:none;'>
<%= image_tag("ajax-loader2.gif", :alt=>"working...", :title=>"working...", :height => '100', :width => '100') -%>
</div>
            <% if flash[:error] %>
              <div id="error_flash" class="box_standout">
                <%= link_to_function image_tag("close.gif", :style => "float: right;"), visual_effect(:toggle_slide, "error_flash", :duration => 0.3) %><%= white_list flash[:error] %>
              </div>
            <% end %>
            <% if flash[:notice] %>
              <div id="notice_flash" class="box_standout">
                <%= link_to_function image_tag("close.gif", :style => "float: right;"), visual_effect(:toggle_slide, "notice_flash", :duration => 0.3) %><%= white_list flash[:notice] %>
              </div>
            <% end %>
            <%= yield :layout %>
<% if controller.action_name != "about" -%>
<div style = "text-align: center; font-size: larger;">
<ol class="variable-suggestions" style="margin: 1em 0 0 0;">
<li title="Find out more about MethodBox, it's motivations and the people behind it"><%= link_to 'About MethodBox', about_url -%></li>
<li>|</li>
<li title="Enter the MethodBox. See what people are sharing. Search and view surveys, scripts, data extracts and more"><%= link_to 'Try it out', surveys_url -%></li>
<ol>
</div>
<% end -%>
          </div>
        </div>
</div>
</div>
</div>
<div id="footer">
    <div id="ft">
      <%= render :partial=>"layouts/footer" %>
    </div>
</div>
<%# NB! These javascript include should be here - otherwise folds will not be displayed on any pages. -%>
<%= javascript_include_tag "folds.js" %>
</body>
</html>
